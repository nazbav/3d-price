<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .bar { height:46px; display:flex; align-items:center; gap:10px; padding:0 10px; background:#111827; color:#e5e7eb; user-select:none; }
    .btn { font-size:12px; padding:7px 10px; border-radius:8px; border:1px solid #374151; background:#1f2937; color:#e5e7eb; cursor:pointer; }
    .btn:disabled { opacity:.55; cursor:not-allowed; }
    .spacer { flex:1; }
    .msg { font-size:12px; color:#cbd5e1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:46vw; }
    .ok { background:#065f46; border-color:#064e3b; }
    .warn { background:#7c2d12; border-color:#7c2d12; }
  </style>
</head>
<body>
  <div class="bar">
    <span class="msg" id="msg"></span>
    <span class="spacer"></span>

    <button type="button" class="btn" id="btnParams">Параметры</button>
  </div>

<script>
  const $ = (id) => document.getElementById(id);
  function setStatus(s){
    $("msg").textContent = s.message || "";
  }

  async function refresh(){
    const s = await window.toolbarApi.getStatus();
    setStatus(s);
  }

  $("btnParams").addEventListener('click', (event) => {
    if (!event.isTrusted) return;
    window.toolbarApi.openParams();
  });

  window.toolbarApi.onProgress((p) => {
    $("msg").textContent = p && p.message ? p.message : "…";
  });

  window.toolbarApi.onStatus((s) => setStatus(s));

  refresh();
</script>
</body>
</html>
