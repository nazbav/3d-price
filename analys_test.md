# Анализ задач

## Текущая реализация
- Профили материалов Orca уже вынесены глобально. Для них есть отдельное окно управления, поддерживающее импорт JSON и скачивание.
- Профили принтеров хранятся внутри каждого принтера (`orcaProfiles`). Модальное окно Orca-принтера позволяет импортировать/скачивать JSON и INFO.
- Импорт модели по ссылке ищет материал по названию профиля Orca. Если найдено несколько вариантов, пользователю предлагается выбрать.
- Скрипт `sync_orca.py` преобразует экспорт OrcaSlicer в формат калькулятора, создавая профили материалов и принтеров внутри соответствующих сущностей.

## Требуемые доработки
1. **Вынести профили принтера в отдельный глобальный список.** Необходимо добавить структуру `printerProfiles` и хранить в принтерах только идентификаторы профилей. Должно появиться модальное окно для просмотра и удаления профилей, аналогичное менеджеру профилей материалов.
2. **Присваивание профилей.** Один принтер может иметь несколько профилей, но каждый профиль принадлежит только одному принтеру. При назначении следует проверять уникальность.
3. **Изменить импортер по ссылке.** При выборе материала поиск выполняется по профилю Orca. Если профиль материала или принтера связан с несколькими объектами, должно открываться окно выбора.
4. **Убрать возможность скачивания профилей и отдельные кнопки импорта.** Интерфейс профилей теперь предназначен только для просмотра и удаления.
5. **Адаптировать `sync_orca.py`.** Скрипт должен формировать новый раздел `printerProfiles` и заполнять `profileIds` у принтеров.
6. **Прочие изменения.** Обновить миграцию данных, функции загрузки профилей в `test.html` и документацию.

## Возможные риски и ограничения
- Требуется аккуратно преобразовать существующие данные пользователей. При миграции необходимо переносить старые поля `orcaProfiles`, `orca`, `orcaInfo` в новую структуру.
- Удаление кнопок скачивания сделает невозможным экспорт профилей из интерфейса. Если пользователям требовался бэкап, ему придётся использовать `sync_orca.py`.
- Условие уникальности профиля может нарушить уже сохранённые конфигурации, если один и тот же профиль был скопирован в несколько принтеров. Миграция должна разорвать связь дубликатов.
- В `sync_orca.py` необходимо следить, чтобы не терялись данные при объединении принтеров.

В целом задачи реалистичны, но требуют значительного изменения HTML‑скрипта и логики синхронизации. Заблуждений в постановке не обнаружено.
